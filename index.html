<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StepSight AI - ACL Injury Risk Prediction</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</head>
<body>
    <!-- ===== LANDING PAGE ===== -->
    <div id="landingPage">
        <div class="page-wrapper">
            <!-- Main Content -->
            <main class="main-content">
                <!-- Hero Section -->
                <section class="hero">
                    <div class="hero-content">
                        <h1>StepSight AI</h1>
                        <p>Advanced ACL Injury Risk Prediction Powered by Artificial Intelligence</p>
                        <div class="hero-buttons">
                            <button class="hero-btn hero-btn-primary" onclick="scrollToPortal()">Get Started</button>
                            <button class="hero-btn hero-btn-secondary" onclick="scrollToFeatures()">Learn More</button>
                        </div>
                    </div>
                </section>

                <!-- Choose Portal Section -->
                <section id="portalSection" style="background: white; padding: 60px 40px; border-radius: 20px; margin-bottom: 40px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);">
                    <div style="text-align: center; margin-bottom: 50px;">
                        <h2 style="font-size: 2.5rem; color: #1a1a1a; margin-bottom: 15px;">Choose Your Portal</h2>
                        <p style="font-size: 1.1rem; color: #666;">Are you a healthcare professional or a patient?</p>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px;">
                        <div class="login-box" onclick="openAuthModal('doctor')">
                            <div class="login-icon">ğŸ‘¨â€âš•ï¸</div>
                            <h2>Doctor Portal</h2>
                            <p>Access patient assessments and generate clinical reports for your practice</p>
                            <button class="login-btn doctor-btn">Sign In as Doctor</button>
                        </div>

                        <div class="login-box" onclick="openAuthModal('patient')">
                            <div class="login-icon">ğŸ‘¤</div>
                            <h2>Patient Portal</h2>
                            <p>Get your personalized ACL injury risk assessment and preventive guidance</p>
                            <button class="login-btn patient-btn">Sign In as Patient</button>
                        </div>
                    </div>
                </section>

                <!-- Features Section -->
                <section id="featuresSection" class="features-section">
                    <h2>Why StepSight AI?</h2>
                    <div class="features-grid">
                        <div class="feature-card">
                            <div class="feature-icon">ğŸ“Š</div>
                            <h3>Personalized Risk Score</h3>
                            <p>Get unique ACL injury risk assessment based on comprehensive health profile</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">ğŸ§ </div>
                            <h3>AI-Powered Analysis</h3>
                            <p>Advanced ML models trained on thousands of clinical cases</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">ğŸ“„</div>
                            <h3>Dual Reports</h3>
                            <p>Clinical reports for doctors and simplified guides for patients</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">ğŸŒ</div>
                            <h3>Fully Remote</h3>
                            <p>No sensors neededâ€”complete assessment from your home</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">âš¡</div>
                            <h3>Instant Results</h3>
                            <p>Get risk assessment in seconds with actionable insights</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">ğŸ”’</div>
                            <h3>Privacy Focused</h3>
                            <p>Your data is secure with enterprise-grade encryption</p>
                        </div>
                    </div>
                </section>

                <!-- Sports Risk Chart Section -->
                <section class="sports-risk-section">
                    <div class="section-header">
                        <h2>ACL Injury Risk by Sport</h2>
                        <p>Understanding which activities carry higher ACL injury risk can help you prepare better and take preventive measures</p>
                    </div>

                    <div class="chart-container">
                        <canvas id="sportsRiskChart"></canvas>
                    </div>

                    <div class="risk-info">
                        <div class="risk-info-card">
                            <h4>ğŸ€ Basketball - HIGH RISK</h4>
                            <p>Frequent pivoting, sudden direction changes, and jumping create significant stress on ACL ligaments.</p>
                        </div>
                        <div class="risk-info-card">
                            <h4>âš½ Soccer - HIGH RISK</h4>
                            <p>Explosive cuts, rapid acceleration/deceleration, and physical contact increase injury vulnerability.</p>
                        </div>
                        <div class="risk-info-card">
                            <h4>ğŸ¿ Skiing - HIGH RISK</h4>
                            <p>High-speed descents combined with terrain hazards and equipment mechanics create substantial risk.</p>
                        </div>
                        <div class="risk-info-card">
                            <h4>ğŸˆ Football - MODERATE-HIGH</h4>
                            <p>Powerful movements and collisions, especially for skill position players, elevate ACL injury risk.</p>
                        </div>
                        <div class="risk-info-card">
                            <h4>ğŸ¾ Tennis - MODERATE</h4>
                            <p>Quick lateral movements and court changes require explosive leg movement but with lower contact risk.</p>
                        </div>
                        <div class="risk-info-card">
                            <h4>ğŸƒ Running - LOW-MODERATE</h4>
                            <p>Linear movement is lower risk, but training errors and overuse can still contribute to injury.</p>
                        </div>
                    </div>
                </section>

                <!-- Testimonials Section -->
                <section class="testimonials-section">
                    <div class="testimonials-container">
                        <div class="section-header">
                            <h2>What Our Users Say</h2>
                            <p>Join thousands of athletes and healthcare professionals who trust StepSight AI</p>
                        </div>

                        <div class="testimonials-carousel">
                            <div class="testimonial-card active">
                                <div class="testimonial-stars">â˜…â˜…â˜…â˜…â˜…</div>
                                <div class="testimonial-text">
                                    "StepSight AI gave me the confidence to know where I stood with my ACL health. The personalized recommendations helped me prevent what could have been a serious injury. Incredible tool!"
                                </div>
                                <div class="testimonial-author">
                                    <div class="author-avatar">SA</div>
                                    <div class="author-info">
                                        <h4>Sarah Anderson</h4>
                                        <p>Professional Basketball Player</p>
                                    </div>
                                </div>
                            </div>

                            <div class="testimonial-card">
                                <div class="testimonial-stars">â˜…â˜…â˜…â˜…â˜…</div>
                                <div class="testimonial-text">
                                    "As a sports medicine doctor, I was impressed by the accuracy and depth of analysis. My patients love having a data-driven assessment, and it's become a valuable part of my practice."
                                </div>
                                <div class="testimonial-author">
                                    <div class="author-avatar">DR</div>
                                    <div class="author-info">
                                        <h4>Dr. Michael Rodriguez</h4>
                                        <p>Sports Medicine Specialist</p>
                                    </div>
                                </div>
                            </div>

                            <div class="testimonial-card">
                                <div class="testimonial-stars">â˜…â˜…â˜…â˜…â˜…</div>
                                <div class="testimonial-text">
                                    "After my ACL injury, StepSight AI helped me track my recovery progress. The follow-up assessments guided my rehabilitation perfectly. I'm back to soccer at 100%!"
                                </div>
                                <div class="testimonial-author">
                                    <div class="author-avatar">JM</div>
                                    <div class="author-info">
                                        <h4>James Martinez</h4>
                                        <p>College Soccer Athlete</p>
                                    </div>
                                </div>
                            </div>

                            <div class="testimonial-card">
                                <div class="testimonial-stars">â˜…â˜…â˜…â˜…â˜…</div>
                                <div class="testimonial-text">
                                    "Our athletic department implemented StepSight AI for all our teams. The risk scores have helped us identify and protect vulnerable athletes early. Game changer!"
                                </div>
                                <div class="testimonial-author">
                                    <div class="author-avatar">EP</div>
                                    <div class="author-info">
                                        <h4>Emily Parker</h4>
                                        <p>Athletic Director, D1 University</p>
                                    </div>
                                </div>
                            </div>

                            <div class="testimonial-card">
                                <div class="testimonial-stars">â˜…â˜…â˜…â˜…â˜…</div>
                                <div class="testimonial-text">
                                    "I used StepSight AI to understand my injury risk before trying competitive volleyball. The preventive exercises made such a difference in my performance and confidence!"
                                </div>
                                <div class="testimonial-author">
                                    <div class="author-avatar">KS</div>
                                    <div class="author-info">
                                        <h4>Kira Singh</h4>
                                        <p>Competitive Volleyball Player</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="carousel-controls">
                            <button class="carousel-btn" onclick="prevTestimonial()">â®</button>
                            
                            <div class="carousel-indicators">
                                <span class="indicator active" onclick="goToTestimonial(0)"></span>
                                <span class="indicator" onclick="goToTestimonial(1)"></span>
                                <span class="indicator" onclick="goToTestimonial(2)"></span>
                                <span class="indicator" onclick="goToTestimonial(3)"></span>
                                <span class="indicator" onclick="goToTestimonial(4)"></span>
                            </div>

                            <button class="carousel-btn" onclick="nextTestimonial()">â¯</button>
                        </div>
                    </div>
                </section>
            </main>

            <!-- Sidebar -->
            <aside class="sidebar">
                <!-- Quick Stats -->
                <div class="sidebar-card">
                    <h3>ğŸ“Š By The Numbers</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-number">2.5K+</span>
                            <span class="stat-label">Assessments</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">89%</span>
                            <span class="stat-label">Accuracy</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">50+</span>
                            <span class="stat-label">Clinics</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">15</span>
                            <span class="stat-label">Countries</span>
                        </div>
                    </div>
                </div>

                <!-- Key Features -->
                <div class="sidebar-card">
                    <h3>âœ¨ Key Features</h3>
                    <div class="features-list">
                        <div class="feature-item">
                            <span class="feature-icon">âš¡</span>
                            <span class="feature-text">Instant Risk Analysis</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">ğŸ”’</span>
                            <span class="feature-text">HIPAA Compliant</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">ğŸ“±</span>
                            <span class="feature-text">Mobile Friendly</span>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">ğŸ“Š</span>
                            <span class="feature-text">Detailed Reports</span>
                        </div>
                    </div>
                    <button class="sidebar-cta" onclick="scrollToPortal()">Get Started Free</button>
                </div>

                <!-- Quick Links -->
                <div class="sidebar-card">
                    <h3>ğŸ”— Quick Links</h3>
                    <div class="quick-links">
                        <a class="link-item" href="#about">ğŸ“š About Us</a>
                        <a class="link-item" href="#research">ğŸ”¬ Research</a>
                        <a class="link-item" href="#faq">â“ FAQ</a>
                        <a class="link-item" href="#blog">ğŸ“ Blog</a>
                        <a class="link-item" href="#pricing">ğŸ’° Pricing</a>
                    </div>
                </div>

                <!-- Support Contact -->
                <div class="sidebar-card contact-box">
                    <h3>ğŸ’¬ Need Help?</h3>
                    <p>Our support team is available to answer your questions about our platform and services.</p>
                    <a href="mailto:support@stepsightai.com">ğŸ“§ support@stepsightai.com</a>
                    <br>
                    <a href="tel:+1-855-STEP-AI">ğŸ“ +1-855-7837-24</a>
                </div>
            </aside>
        </div>

        <!-- Footer -->
        <footer>
            <p>&copy; 2025 StepSight AI. Advancing sports medicine through artificial intelligence.</p>
        </footer>
    </div>

    <!-- ===== AUTH MODAL ===== -->
    <div id="authModal" class="auth-modal">
        <div class="auth-form-box">
            <button class="close-btn" onclick="closeAuthModal()">âœ•</button>
            <h2 id="authTitle">Doctor Login</h2>
            <p class="subtitle" id="authSubtitle">Enter your credentials to continue</p>
            
            <form id="authForm" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit" class="auth-submit-btn">Sign In</button>
            </form>
        </div>
    </div>

    <!-- ===== DOCTOR PORTAL APP ===== -->
    <div id="doctorPortalApp" class="app-container">
        <!-- Header -->
        <header>
            <h1>StepSight AI</h1>
            <div class="user-info">
                <div class="user-badge doctor">
                    Doctor: <span id="doctorName"></span>
                </div>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
        </header>

        <div class="container">
            <!-- Navigation Tabs -->
            <div class="portal-nav">
                <button class="nav-tab active" onclick="showDoctorTab('assessment')">ğŸ“‹ Clinical Assessment</button>
                <button class="nav-tab" onclick="showDoctorTab('mri')">ğŸ–¼ï¸ MRI Analysis</button>
                <button class="nav-tab" onclick="showDoctorTab('motion')">ğŸ¥ Motion Tracking</button>
                <button class="nav-tab" onclick="showDoctorTab('live')">ğŸ“¡ Live Tracker</button>


            </div>

            <!-- TAB 1: CLINICAL ASSESSMENT -->
<div id="assessment-tab" class="doctor-tab active">
  <!-- Doctor Dashboard Title -->
  <div class="doctor-dashboard">
    <h2 class="dashboard-title">Doctor Dashboard</h2>
    <p style="color: #666; margin-bottom: 10px;">
      Welcome to your clinical assessment portal. Enter patient information below to generate ACL injury risk assessment.
    </p>
  </div>

  <!-- Patient Information Section -->
  <section class="form-section">
    <h2>ğŸ“‹ Patient Information</h2>
    <div class="patient-info-box">
      <h3>Enter Patient Details</h3>
      <div class="info-grid">
        <div class="form-group">
          <label for="patientName">Patient Name</label>
          <input type="text" id="patientName" placeholder="Full name" required>
        </div>
        <div class="form-group">
          <label for="patientID">Patient ID</label>
          <input type="text" id="patientID" placeholder="e.g., P-12345" required>
        </div>
        <div class="form-group">
          <label for="dateOfBirth">Date of Birth</label>
          <input type="date" id="dateOfBirth" required>
        </div>
        <div class="form-group">
          <label for="contactNumber">Contact Number</label>
          <input type="tel" id="contactNumber" placeholder="+1 (555) 000-0000">
        </div>
      </div>
    </div>
  </section>

  <!-- Assessment Form -->
<section class="form-section">
  <h2>ğŸ“Š Clinical Assessment Form</h2>
  <form id="doctorAssessmentForm">

    <!-- ğŸ”¹ Core Clinical Fields -->
    <div class="form-grid">
      <div class="form-group">
        <label for="age">Age</label>
        <input type="number" id="age" min="10" max="100" required>
      </div>

      <div class="form-group">
        <label for="gender">Gender</label>
        <select id="gender" required>
          <option value="">Select</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
          <option value="other">Other</option>
        </select>
      </div>

      <div class="form-group">
        <label for="bmi">BMI</label>
        <input type="number" id="bmi" step="0.1" min="10" max="50" required>
      </div>

      <div class="form-group">
        <label for="sport">Primary Sport</label>
        <input type="text" id="sport" placeholder="e.g., Basketball, Soccer" required>
      </div>

      <div class="form-group">
        <label for="training">Training Hours per Week</label>
        <input type="number" id="training" step="0.5" min="0" max="50" required>
      </div>

      <div class="form-group">
        <label for="fatigue">Fatigue Level (1-10)</label>
        <input type="range" id="fatigue" min="1" max="10" value="5">
        <div class="slider-value">Current: <span id="fatigueValue">5</span></div>
      </div>

      <div class="form-group">
        <label for="flexibility">Flexibility Score (1-10)</label>
        <input type="range" id="flexibility" min="1" max="10" value="5">
        <div class="slider-value">Current: <span id="flexibilityValue">5</span></div>
      </div>

      <div class="form-group">
        <label for="pastInjury">Past ACL Injury?</label>
        <select id="pastInjury" required>
          <option value="">Select</option>
          <option value="no">No</option>
          <option value="yes">Yes</option>
        </select>
      </div>
    </div>

    <!-- ğŸ”¹ Functional & Motion Metrics INSIDE SAME CARD -->
    <hr style="margin: 24px 0; border: none; border-top: 1px solid #e5e7eb;">

    <h3 style="margin-bottom: 8px;">ğŸƒâ€â™€ï¸ Functional & Motion Metrics</h3>
    <p style="color:#6b7280; margin-bottom: 16px; font-size:0.9rem;">
      Optional objective measures from motion tracking and field tests.
    </p>

    <div class="form-grid">
      <div class="form-group">
        <label for="kneeValgus">Knee Valgus Angle (Â°)</label>
        <input type="number" id="kneeValgus" min="0" max="40" step="0.1" placeholder="e.g., 8.5">
        <small>Measured via motion tracking (inward knee collapse)</small>
      </div>

      <div class="form-group">
  <label for="dynamicStability">Dynamic Stability Score (0-100)</label>
  <input type="number" id="dynamicStability" min="0" max="100" placeholder="e.g., 85">
  <small>Auto-filled from live tracker</small>
</div>


      <div class="form-group">
        <label for="balanceTime">Single-Leg Balance (seconds)</label>
        <input type="number" id="balanceTime" min="0" max="60" placeholder="e.g., 22">
        <small>Average duration patient can hold balance</small>
      </div>

      <div class="form-group">
        <label for="strengthRatio">Hamstring : Quadriceps Ratio</label>
        <input type="number" id="strengthRatio" min="0" max="2" step="0.01" placeholder="e.g., 0.65">
        <small>Calculated via strength test or smart-band data</small>
      </div>

      <div class="form-group">
        <label for="landingQuality">Landing Mechanics Score (0-10)</label>
        <input type="range" id="landingQuality" min="0" max="10" value="5">
        <div class="slider-value">Current: <span id="landingQualityValue">5</span></div>
      </div>
    </div>

    <!-- ğŸ”¹ Buttons stay at the bottom of the same card -->
    <div class="button-group" style="margin-top:24px;">
      <button type="submit" class="analyze-btn">Analyze Risk</button>
      <button type="reset" class="reset-btn">Clear Form</button>
    </div>

  </form>
</section>

<!-- âœ… DOCTOR CLINICAL NOTES -->
<section class="form-section">
  <h2>ğŸ©º Doctor Clinical Notes</h2>
  <div class="form-group">
    <label for="doctorNotes">Clinical observations, test results & plan</label>
    <textarea 
      id="doctorNotes" 
      rows="4" 
      placeholder="Example: Positive Lachman on right knee, mild effusion, patient reports instability when cutting to the left..."
      style="width: 100%; padding: 10px; border-radius: 10px; border: 1px solid #d4d4d4; resize: vertical;"
    ></textarea>
    <small>These notes will be attached to the clinical report and result summary.</small>
  </div>
</section>





                
<!-- Results Section -->
               
<section class="results-section" id="resultsSection">
                   
    <div class="loading" id="loading">
                      
        <div class="spinner"></div>
                     
        <p>Analyzing patient data with AI...</p>
                   
    </div>


                    <div id="resultsContent" style="display: none;">
                        <h2>ğŸ“ˆ ACL Risk Assessment Report</h2>
                        
                        <div class="risk-score">
                            <div class="risk-circle" id="riskCircle">
                                <span id="riskScore">--</span>%
                            </div>
                            <div class="risk-label" id="riskLabel">Calculating...</div>
                            <div class="risk-description" id="riskDescription"></div>
                        </div>

                        <div style="background: #f5f7fa; padding: 20px; border-radius: 12px; margin: 25px 0;">
                            <h3 style="color: #667eea; margin-bottom: 15px;">ğŸ“‹ Clinical Recommendations</h3>
                            <div id="recommendations" style="color: #666; line-height: 1.8;"></div>
                        </div>

                        <div class="download-buttons">
                            <button class="download-btn" onclick="downloadReport('doctor')">
                                ğŸ“‹ Clinical Report
                            </button>
                            <button class="download-btn" onclick="downloadReport('patient')">
                                ğŸ“„ Patient Report
                            </button>
                        </div>
                    </div>
                </section>
            </div>

            <!-- TAB 2: MRI ANALYSIS -->
            <div id="mri-tab" class="doctor-tab">
                <div id="mriWrapper">
                <div class="mri-container">
                    <!-- MRI Header -->
                    <div class="mri-header">
                        <h2>ğŸ–¼ï¸ MRI Upload & Analysis</h2>
                        <p>Upload patient MRI images for AI-powered analysis and detailed clinical assessment</p>
                    </div>

                    <div class="mri-content">
                        <!-- Upload Section -->
                        <div class="mri-upload-box">
                            <h3>ğŸ“¤ Upload MRI Image</h3>

                            <div class="drop-zone" id="dropZone">
                                <div class="drop-zone-icon">ğŸ“</div>
                                <p><strong>Click to upload or drag files here</strong></p>
                                <p class="drop-zone-hint">Supported formats: JPG, PNG, DICOM</p>
                            </div>

                            <input type="file" id="fileInput" accept="image/*,.dcm" />

                            <div class="file-info" id="fileInfo">
                                <div class="file-name" id="fileName"></div>
                                <div class="file-size" id="fileSize"></div>
                            </div>

                            <button type="button" class="mri-analyze-btn" id="analyzeBtn" disabled>
    ğŸ” Analyze MRI
</button>


                            <div class="progress-bar" id="progressBar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>

                            <div class="error-message" id="errorMessage"></div>
                        </div>

                        <!-- Analysis Section -->
                        <div class="mri-analysis-box">
                            <h3>ğŸ“Š Analysis Results</h3>

                            <div class="empty-state" id="emptyState">
                                <div class="empty-state-icon">ğŸ“‹</div>
                                <p>Upload an MRI image to see analysis results</p>
                            </div>

                            <div class="mri-loading" id="loadingState">
                                <div class="spinner"></div>
                                <p>Analyzing MRI image with AI...</p>
                            </div>

                            <div class="mri-analysis-content" id="analysisContent">
                                <!-- Risk Score -->
                                <div class="mri-score-box">
                                    <div class="score-number" id="acuityScore">--</div>
                                    <div class="score-label">Overall ACL Injury Risk Score</div>
                                </div>

                                <!-- Structural Findings -->
                                <div class="mri-analysis-section">
                                    <div class="section-title">ğŸ¦µ Structural Findings</div>
                                    <div id="structuralFindings"></div>
                                </div>

                                <!-- Tear Analysis -->
                                <div class="mri-analysis-section">
                                    <div class="section-title">ğŸ” Tear Analysis</div>
                                    <div id="tearAnalysis"></div>
                                </div>

                                <!-- Surrounding Tissues -->
                                <div class="mri-analysis-section">
                                    <div class="section-title">ğŸ§¬ Surrounding Tissues</div>
                                    <div id="surroundingTissues"></div>
                                </div>

                                <!-- Severity Assessment -->
                                <div class="mri-analysis-section">
                                    <div class="section-title">âš ï¸ Severity Assessment</div>
                                    <div id="severityAssessment"></div>
                                </div>

                                <!-- Treatment Recommendation -->
                                <div class="mri-recommendation-box">
                                    <strong>ğŸ¯ Recommended Treatment Plan:</strong>
                                    <div id="treatmentPlan"></div>
                                </div>

                                <!-- Download Buttons -->
                                <div class="mri-download-buttons">
                                    <button class="mri-download-btn" onclick="downloadMRIReport('pdf')">
                                        ğŸ“„ Download Report
                                    </button>
                                    <button class="mri-download-btn" onclick="downloadMRIReport('email')">
                                        ğŸ“§ Email Report
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
        <!-- TAB: LIVE TRACKER -->
<div id="live-tab" class="doctor-tab">
  <!-- ğŸŒ Centered Header & Controls -->
<div style="text-align:center;margin-top:10px;margin-bottom:25px;font-family:'Inter',sans-serif;">
  <h2 style="font-size:1.6rem;font-weight:700;color:#1e3a8a;margin-bottom:8px;">
    ğŸ‘©â€âš•ï¸ Patient Live Tracker
  </h2>
  <p style="font-size:1rem;color:#4b5563;margin-bottom:18px;">
    Monitor your patientâ€™s movement metrics in real time.
  </p>

  <div style="display:flex;justify-content:center;align-items:center;gap:12px;">
    <input id="patientEmailInput" type="email" value="roshanbhatta1122@gmail.com"
           placeholder="Enter patient email..."
           style="padding:10px 14px;width:280px;border:1px solid #d1d5db;
                  border-radius:10px;font-size:0.95rem;font-family:'Inter',sans-serif;
                  outline:none;transition:box-shadow 0.2s;"
           onfocus="this.style.boxShadow='0 0 0 3px rgba(59,130,246,0.3)'"
           onblur="this.style.boxShadow='none'">

    <button id="watchPatientBtn"
            style="background:linear-gradient(135deg,#2563eb,#1d4ed8);
                   color:white;padding:10px 20px;font-size:0.95rem;font-weight:600;
                   border:none;border-radius:10px;cursor:pointer;
                   transition:background 0.3s,transform 0.2s;">
      Start Monitoring
    </button>
  </div>
</div>

  </div>

  <!-- ğŸ§  Enhanced Live Tracker -->
<div id="livePatientFeed"
  style="display:none;margin-top:25px;background:linear-gradient(145deg,#f9fafb,#eef2ff);
         padding:24px;border-radius:16px;text-align:center;box-shadow:0 8px 20px rgba(0,0,0,0.05);
         font-family:'Inter',sans-serif;color:#111827;">

  <h3 style="font-size:1.4rem;font-weight:700;color:#1e40af;margin-bottom:15px;">
    ğŸ“¡ Real-Time Motion Data
  </h3>

  <div style="display:flex;justify-content:center;flex-wrap:wrap;gap:15px;margin-bottom:15px;">
    <div style="background:white;padding:14px 18px;border-radius:12px;min-width:150px;
                box-shadow:0 2px 10px rgba(0,0,0,0.05);">
      <p style="font-size:0.9rem;color:#6b7280;margin:0;">Knee Angle</p>
      <p id="liveAngle" style="font-size:1.6rem;font-weight:700;margin:0;">--</p>
      <span style="font-size:0.8rem;color:#9ca3af;">degrees</span>
    </div>

    <div style="background:white;padding:14px 18px;border-radius:12px;min-width:150px;
                box-shadow:0 2px 10px rgba(0,0,0,0.05);">
      <p style="font-size:0.9rem;color:#6b7280;margin:0;">Stability</p>
      <p id="liveStability" style="font-size:1.6rem;font-weight:700;margin:0;color:#16a34a;">--</p>
      <span style="font-size:0.8rem;color:#9ca3af;">/100</span>
    </div>

    <div style="background:white;padding:14px 18px;border-radius:12px;min-width:150px;
                box-shadow:0 2px 10px rgba(0,0,0,0.05);">
      <p style="font-size:0.9rem;color:#6b7280;margin:0;">Reps</p>
      <p id="liveReps" style="font-size:1.6rem;font-weight:700;margin:0;">--</p>
    </div>

    <div style="background:white;padding:14px 18px;border-radius:12px;min-width:150px;
                box-shadow:0 2px 10px rgba(0,0,0,0.05);">
      <p style="font-size:0.9rem;color:#6b7280;margin:0;">Duration</p>
      <p id="liveDuration" style="font-size:1.6rem;font-weight:700;margin:0;">--</p>
      <span style="font-size:0.8rem;color:#9ca3af;">seconds</span>
    </div>
  </div>

  <div style="background:white;border-radius:10px;padding:12px 16px;
              display:inline-block;box-shadow:inset 0 0 10px rgba(0,0,0,0.05);">
    <p id="liveAlert" style="font-size:1rem;font-weight:600;color:#1e3a8a;margin:0;">
      Waiting for session...
    </p>
  </div>
</div>


        <!-- TAB: MOTION TRACKING -->
<div id="motion-tab" class="doctor-tab">
  <section class="form-section">
    <h2>ğŸ¥ Real-Time Motion Tracking</h2>
    <p>Use your phone or webcam to track movement and estimate knee angle in real time.</p>

    <div style="display:flex;flex-direction:column;align-items:center;gap:10px;">
      <video id="poseVideo" autoplay playsinline muted style="display:none;"></video>
      <canvas id="outputCanvas" width="500" height="380"
        style="width:100%;max-width:500px;border-radius:10px;border:2px solid #e5e7eb;"></canvas>

      <div id="motionMetrics"
        style="margin-top:15px;text-align:center;background:#f5f7fa;padding:15px;border-radius:10px;width:90%;max-width:400px;">
        <h3>ğŸ“Š Live Motion Metrics</h3>
        <p><strong>Knee Angle:</strong> <span id="kneeAngle">--</span>Â°</p>
        <p><strong>Pose Stability:</strong> <span id="stability">--</span></p>

        <!-- ğŸ§  ADD THIS PART BELOW THE STABILITY LINE -->
        <p style="font-weight:600;color:#374151;margin-top:10px;">Form Stability</p>
        <div id="stabilityBarContainer"
          style="width:100%;max-width:400px;height:20px;background-color:#e5e7eb;border-radius:10px;overflow:hidden;margin-top:5px;">
          <div id="stabilityBar"
            style="width:0%;height:100%;background-color:#22c55e;transition:width 0.3s ease, background-color 0.3s ease;">
          </div>
        </div>
        <!-- âœ… END OF ADDED BAR -->




      <!-- Motion tracking controls -->
<div style="display:flex;gap:10px;margin-top:15px;">
  <button class="analyze-btn" id="startMotionBtn">Start Motion Tracking</button>
  <button class="analyze-btn" id="stopMotionBtn" style="background:#ef4444;display:none;">Stop Tracking</button>
</div>

<!-- ğŸ MODERN SESSION SUMMARY POPUP -->
<div id="sessionSummaryModal"
  style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.4);backdrop-filter:blur(8px);
  align-items:center;justify-content:center;z-index:9999;animation:fadeIn 0.3s;">
  <div style="background:white;padding:25px 30px;border-radius:16px;
    box-shadow:0 8px 30px rgba(0,0,0,0.2);
    width:90%;max-width:380px;text-align:center;transform:translateY(20px);
    animation:slideUp 0.4s ease-out;">
    <h2 style="margin-bottom:15px;font-size:1.4rem;color:#111827;">ğŸ Session Summary</h2>

    <div style="display:flex;flex-direction:column;gap:10px;font-size:1rem;">
      <div style="background:#dbeafe;color:#1e40af;padding:8px;border-radius:8px;">
        <strong>â± Duration:</strong> <span id="summaryDuration">--</span>
      </div>
      <div style="background:#dcfce7;color:#166534;padding:8px;border-radius:8px;">
        <strong>ğŸ’ª Total Reps:</strong> <span id="summaryReps">--</span>
      </div>
      <div style="background:#fef3c7;color:#92400e;padding:8px;border-radius:8px;">
        <strong>ğŸ§  Avg Stability:</strong> <span id="summaryAvgStability">--</span>
      </div>
      <div style="background:#f3e8ff;color:#6b21a8;padding:8px;border-radius:8px;">
        <strong>â­ Best Stability:</strong> <span id="summaryBestStability">--</span>
      </div>
    </div>

    <p id="summaryComment"
      style="margin-top:15px;font-size:0.95rem;color:#374151;font-style:italic;">
      Keep it up! Smooth and controlled movements.
    </p>

    <div style="display:flex;justify-content:center;gap:10px;margin-top:20px;">
      <button id="downloadReportBtn"
        style="background:#2563eb;color:white;border:none;padding:10px 18px;border-radius:8px;cursor:pointer;">
        ğŸ“„ Download Report
      </button>
      <button id="closeSummaryBtn"
        style="background:#22c55e;color:white;border:none;padding:10px 18px;border-radius:8px;cursor:pointer;">
        Close
      </button>
    </div>
  </div>
</div>

<!-- simple animations -->
<style>
@keyframes fadeIn {from{opacity:0}to{opacity:1}}
@keyframes slideUp {from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
</style>




        <!-- Footer -->
        <footer>
            <p>&copy; 2025 StepSight AI. Clinical Assessment Portal for Healthcare Professionals.</p>
        </footer>
    </div>

    <script src="js/script.js"></script>
</body>
</html>